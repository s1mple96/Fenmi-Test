# ETC测试工具集

一个基于PyQt5的ETC（电子不停车收费系统）测试工具集，支持数据库造数和ETC申办流程自动化测试。

## 功能特性

### 1. 数据库造数工具
- 支持多种数据类型的批量生成
- 可配置的数据生成规则
- 实时进度显示
- 支持MySQL数据库

### 2. ETC申办流程自动化
- 完整的ETC申办流程自动化
- 支持车牌验证、身份认证、银行卡绑定
- 自动处理验证码（签约校验和代扣支付）
- 数据库状态更新和库存管理
- 多线程处理，UI响应流畅

## 项目结构

```
Fenmi-Test/
├── main_win.py              # 主程序入口
├── winform/                 # UI界面模块
│   ├── data_gen_widget.py   # 数据库造数界面
│   └── etc_apply_widget.py  # ETC申办界面
├── ui/                      # UI组件和工具
│   ├── components/          # UI组件
│   ├── utils/              # UI工具类
│   ├── builder/            # UI构建器
│   └── binder/             # UI绑定器
├── worker/                  # 业务逻辑模块
│   ├── data/               # 数据生成工作线程
│   └── etc/                # ETC申办业务逻辑
├── utils/                   # 工具类模块
├── config/                  # 配置文件
├── test/                    # 测试文件
└── docs/                    # 文档
```

## 安装和运行

### 环境要求
- Python 3.7+
- PyQt5
- pymysql
- requests

### 安装依赖
```bash
pip install -r requirements.txt
```

### 运行程序
```bash
python main_win.py
```

## 主要功能说明

### ETC申办流程
1. **车牌校验** - 验证车牌号是否可申办
2. **身份认证** - 提交身份证和银行卡信息
3. **签约校验** - 使用手机验证码进行签约验证
4. **车辆信息保存** - 保存行驶证信息
5. **代扣支付** - 使用日期格式验证码进行支付
6. **数据库更新** - 更新订单状态和用户信息
7. **库存管理** - 自动入库OBU和ETC设备

### 验证码机制
- **签约校验**：使用手机收到的6位数字验证码
- **代扣支付**：使用系统生成的日期格式验证码（YYMMDD）

## 配置说明

### 数据库配置
在 `config/connections.json` 中配置数据库连接信息。

### API配置
在 `config/default_values.json` 中配置默认参数值。

## 开发说明

### 代码规范
- 使用中文注释
- 遵循OOP设计原则
- UI和业务逻辑分离
- 使用信号槽机制进行线程间通信

### 扩展指南
- 新增功能模块放在 `worker/` 目录下
- UI组件放在 `ui/components/` 目录下
- 工具类放在 `utils/` 目录下

## 许可证

本项目仅供内部测试使用。

## 更新日志

### v1.0.0
- 实现数据库造数功能
- 实现ETC申办流程自动化
- 支持验证码自动处理
- 完成数据库状态更新和库存管理 
